# ================================================================
# Decap CMS — Configuration L'Atelier d'Antoine
# ================================================================
#
# AUTHENTIFICATION :
# ─────────────────
# OAuth géré par deux fonctions Vercel serverless :
#   GET /api/auth     → redirige vers GitHub
#   GET /api/callback → échange le code contre un token
#
# Variables d'environnement requises sur Vercel :
#   GITHUB_CLIENT_ID     → votre GitHub OAuth App Client ID
#   GITHUB_CLIENT_SECRET → votre GitHub OAuth App Client Secret
#
# Développement local : décommentez local_backend et commentez base_url/auth_endpoint
#
# ================================================================

backend:
  name: github
  repo: marjohoc/atelier-antoine
  branch: main
  base_url: https://atelier-antoine.vercel.app
  auth_endpoint: api/auth

# Développement local : décommentez la ligne suivante
# local_backend: true

locale: fr

media_folder: "src/uploads"
public_folder: "/uploads"

# ================================================================
# Collections
# ================================================================
collections:

  # ── Réalisations ─────────────────────────────────────────────
  - name: "realisations"
    label: "Réalisations"
    label_singular: "Réalisation"
    folder: "src/realisations"
    create: true
    delete: true
    slug: "{{slug}}"
    summary: "{{title}} — {{sous_categorie}}"
    sortable_fields: ["date", "title"]
    fields:
      - label: "Titre"
        name: "title"
        widget: "string"
        hint: "Ex : Porte d'entrée en chêne massif"

      - label: "Description courte"
        name: "description"
        widget: "text"
        hint: "2-3 phrases décrivant la réalisation (affiché dans la galerie)"

      - label: "Catégorie"
        name: "categorie"
        widget: "select"
        options:
          - { label: "Menuiserie extérieure", value: "exterieur" }
          - { label: "Menuiserie intérieure", value: "interieur" }
          - { label: "Agencement", value: "agencement" }

      - label: "Sous-catégorie"
        name: "sous_categorie"
        widget: "select"
        options:
          - { label: "Portes extérieures",     value: "portes-exterieures" }
          - { label: "Fenêtres",               value: "fenetres" }
          - { label: "Escaliers extérieurs",   value: "escaliers-exterieurs" }
          - { label: "Escaliers intérieurs",   value: "escaliers-interieurs" }
          - { label: "Portes intérieures",     value: "portes-interieures" }
          - { label: "Parquet",                value: "parquet" }
          - { label: "Dressing",               value: "dressing" }
          - { label: "Cuisine",                value: "cuisine" }
          - { label: "Bibliothèque",           value: "bibliotheque" }
          - { label: "Mobilier sur-mesure",    value: "mobilier" }

      - label: "Date de réalisation"
        name: "date"
        widget: "datetime"
        date_format: "YYYY-MM-DD"
        time_format: false
        required: false

      - label: "Photos (1 à 5)"
        name: "photos"
        widget: "list"
        min: 0
        max: 5
        label_singular: "Photo"
        fields:
          - label: "Fichier image"
            name: "src"
            widget: "image"
            hint: "JPG ou PNG, largeur recommandée : 1600px minimum"
          - label: "Description (attribut alt)"
            name: "alt"
            widget: "string"
            hint: "Description précise de la photo pour l'accessibilité et le SEO"

  # ── Paramètres du site ────────────────────────────────────────
  - name: "settings"
    label: "Paramètres"
    files:

      - label: "Présentation de l'atelier"
        name: "atelier"
        file: "src/_data/atelier.json"
        fields:
          - label: "Image Hero (page d'accueil)"
            name: "hero_image"
            widget: "image"
            required: false
            hint: "Photo plein écran — paysage, minimum 1920×1080px"

          - label: "Alt de l'image hero"
            name: "hero_image_alt"
            widget: "string"
            required: false
            default: "Réalisation de menuiserie sur-mesure par L'Atelier d'Antoine"

          - label: "Titre de la présentation"
            name: "presentation_titre"
            widget: "string"

          - label: "Texte de présentation"
            name: "presentation_texte"
            widget: "markdown"
            hint: "2 à 4 paragraphes présentant l'atelier"

          - label: "Photo de l'atelier"
            name: "atelier_photo"
            widget: "image"
            required: false
            hint: "Photo de l'atelier ou du menuisier au travail"

          - label: "Alt de la photo atelier"
            name: "atelier_photo_alt"
            widget: "string"
            required: false
            default: "L'atelier de menuiserie d'Antoine à Blois"
